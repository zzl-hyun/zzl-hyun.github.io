{{ $item := .item }}
{{ $hasAttachments := partial "functions/has_attachments" $item }}

{{ $link := $item.RelPermalink }}
{{ $target := "" }}
{{ if $item.Params.external_link }}
  {{ $link = $item.Params.external_link }}
  {{ $target = "target=\"_blank\" rel=\"noopener\"" }}
{{ end }}

{{ $resource := partial "blox-core/functions/get_featured_image.html" $item }}

<div class="card">

  <div class="card-header">
    <h3 class="card-title"><a href="{{ $link }}" {{ $target | safeHTMLAttr }}>
      {{ $item.Title | markdownify | emojify }}
    </a></h3>
  </div>

  {{ with $resource }}
    {{ $image := .Resize "600x450" }}
      <div class="card-image hover-overlay">
        <a href="{{ $link }}" {{ $target | safeHTMLAttr }}>
          <img class="img-responsive" loading="lazy" src="{{ $image.RelPermalink }}" 
              height="{{ $image.Height }}" width="{{ $image.Width }}" alt="{{ $item.Title | plainify }}">
        </a>
      </div>
  {{ end }}

</div>

<style>
.card {
  border: 1px solid #eaeaea;
  padding: 20px;
  margin: 15px 0;
  border-radius: 8px;
  background-color: #fafafa;
  box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.1);
}

.card-header {
  margin-bottom: 15px;
}

.card-title a {
  text-decoration: none;
  color: #333;
}
</style>
